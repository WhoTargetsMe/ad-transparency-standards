{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Political Advertising Transparency Data Standard",
    "description": "A schema for how political advertising data is presented to increase comprehension, trust, interoperability, and quality of analysis.",
    "type": "object",
    "properties": {
        "advertiser": {
            "type": "object",
            "properties": {
                "details": {
                    "type": "object",
                    "properties": {
                        "advertiser_id": {
                            "description": "An internal ID for the advertiser (e.g. a pageID)",
                            "type": "string"
                        },
                        "advertiser_real_name": {
                            "description": "The name of the entity running the advert (e.g. \"The Democratic Party\")",
                            "type": "string"
                        },
                        "advertiser_internal_name": {
                            "description": "An internal name of the entity (e.g. a short url \"democrats\")",
                            "type": "string"
                        },
                        "advertiser_website": {
                            "description": "The website of the entity (e.g. \"https://democrats.org\" - useful to de-duplicate/unify data)",
                            "type": [
                                "string",
                                "null"
                            ],
                            "format": "uri"
                        },
                        "advertiser_electoral_id": {
                            "description": "An (external) ID held by an electoral regulator (e.g. FEC ID)",
                            "type": "string"
                        },
                        "advertiser_legal_status": {
                            "description": "The legal status of the entity (e.g. individual, company, charity, political party)",
                            "type": "string"
                        },
                        "advertiser_type": {
                            "description": "The type of entity (e.g. candidate, elected official, political party, non-profit, public figure etc)",
                            "type": "string"
                        },
                        "advertiser_verification_date": {
                            "description": "The date the entity was verified (blank if not, or no verification programme)",
                            "type": "string",
                            "format": "date"
                        },
                        "advertiser_geo_scope": {
                            "description": "Allow the entity to specify where they are active (country, region within country etc)",
                            "type": "string"
                        }
                    },
                    "required": [
                        "advertiser_id",
                        "advertiser_real_name",
                        "advertiser_website"
                    ]
                }
            }
        },
        "advertisement": {
            "type": "object",
            "properties": {
                "details": {
                    "type": "object",
                    "properties": {
                        "advert_id": {
                            "description": "An internal ID for the advert",
                            "type": "string"
                        },
                        "ad_library_entity_url": {
                            "description": "A deeplink to the entity in the platform advert library",
                            "type": [
                                "string",
                                "null"
                            ],
                            "format": "uri"
                        },
                        "ad_library_advert_url": {
                            "description": "A deeplink to the advert in the platform advert library",
                            "type": ["string", "null"],
                            "format": "uri"
                        },
                        "advert_copy": {
                            "description": "All text used in the advert",
                            "type": "string"
                        },
                        "advert_alt_text": {
                            "description": "All alt text used in images. Can be automatically generated by the advert publisher",
                            "type": "string"
                        },
                        "advert_transcript": {
                            "description": "An automated or user-provided transcript/subtitles for audio or video adverts",
                            "type": "string"
                        },
                        "advert_media_urls": {
                            "description": "Link(s) to the media files used in the advert",
                            "type": "array",
                            "items": {
                                "type": "string",
                                "format": "uri"
                            }
                        },
                        "advert_urls": {
                            "description": "The external URLs used in the advert (e.g. where the advert clicks through to)",
                            "type": "array",
                            "items": {
                                "type": "string",
                                "format": "uri"
                            }
                        },
                        "advert_automation": {
                            "description": "What, if any, features of the advert were automated/automatically generated?",
                            "type": "string"
                        },
                        "advert_automation_test_result": {
                            "description": "How did this advert perform relative to others it was tested against?",
                            "type": "string"
                        },
                        "advert_deleted": {
                            "description": "TRUE if the advertiser later deleted the advert after it ran",
                            "type": "boolean"
                        }
                    },
                    "required": [
                        "ad_id"
                    ]
                },
                "group": {
                    "type": "object",
                    "properties": {
                        "group_not_disclosed": {
                            "description": "Default value. Unclear if part of a group of adverts",
                            "type": "boolean",
                            "default": true
                        },
                        "group_id": {
                            "description": "A shared ID for all adverts in the same advert group",
                            "type": "string"
                        }
                    }
                },
                "testing": {
                    "type": "object",
                    "properties": {
                        "testing_not_disclosed": {
                            "description": "Default value. The advert doesn't make use of the platform's testing capabilities",
                            "type": "boolean",
                            "default": true
                        },
                        "testing_type": {
                            "description": "Values - 'AB', 'Multivariate', 'ML' etc.",
                            "type": "string"
                        },
                        "testing_test_set": {
                            "description": "A value to associate each tested variation with others in the same set",
                            "type": "string"
                        }
                    }
                },
                "dates": {
                    "type": "object",
                    "properties": {
                        "datetime_period": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "datetime_live": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "format": "date-time",
                                        "description": "When the advert started running"
                                    },
                                    "datetime_ended": {
                                        "type": [
                                            "string",
                                            "null"
                                        ],
                                        "format": "date-time",
                                        "description": "When the advert stopped running (blank if still delivering impressions and budget not exhausted)"
                                    }
                                }
                            }
                        },
                        "datetime_approved": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "format": "date-time",
                            "description": "The date and time the advert was approved to run"
                        },
                        "datetime_created": {
                            "type": [
                                "string",
                                "null"
                            ],
                            "format": "date-time",
                            "description": "When the advert was created"
                        }
                    }
                }
            }
        },
        "advertising_platform": {
            "type": "object",
            "properties": {
                "platform_name": {
                    "description": "The name of the advertising platform",
                    "type": "string"
                },
                "platform_url": {
                    "description": "The URL of the advertising platform",
                    "type": "string",
                    "format": "uri"
                },
                "platform_ad_policy": {
                    "description": "The public URL of the platform's advertising policies and rules",
                    "type": "string",
                    "format": "uri"
                },
                "iab_id": {
                    "description": "IAB ID for advertising technology providers. For more details read the IAB's website \"TCF – Transparency & Consent Framework\"",
                    "type": "string"
                }
            }
        },
        "targeting_categories": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "description": "Specific platform's name of the targeting category",
                        "type": "string"
                    },
                    "type": {
                        "description": "Multi-platform category of the targeting category",
                        "type": "string"
                    },
                    "value": {
                        "description": "The value of the targeting category",
                        "type": "string"
                    }
                },
                "required": [
                    "name",
                    "type",
                    "value"
                ],
                "allOf": [
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "geo_location"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "geo_location_approximate": {
                                    "description": "Geolocation data is based on either fuzzified lat-long or IP-derived location",
                                    "type": "boolean"
                                },
                                "geo_location_precise": {
                                    "description": "Precise geolocation data, as defined by the IAB TCF v2.0",
                                    "type": "boolean"
                                },
                                "geo_location_excluded": {
                                    "description": "Any geographic exclusions",
                                    "type": "string"
                                },
                                "geo_location_unknown_type": {
                                    "description": "Other geolocation types, including cases where both APPROXIMATE and PRECISE are used or where APPROXIMATE or PRECISE cannot be determined",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "remarketing"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "remarketing_third_party": {
                                    "description": "The advert targeting is based on online or offline data about you from someone who may or may not be the advertiser. Value is the name of this entity",
                                    "type": "string"
                                },
                                "remarketing_dataset_name": {
                                    "description": "A name given to the dataset by the entity above. For example 'Potential customers'",
                                    "type": "string"
                                },
                                "remarketing_website_visit": {
                                    "description": "The advert targeting is based on a previous visit to an advertiser’s website",
                                    "type": "boolean"
                                },
                                "remarketing_exclusions": {
                                    "description": "Any advert remarketing exclusions",
                                    "type": "string"
                                },
                                "remarketing_unknown_type": {
                                    "description": "Other remarketing types not listed or undetermined. For example, UPLOADED or WEBSITE_VISIT cannot be determined",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "user_characteristic_gender"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "user_characteristic_gender": {
                                    "description": "The advert targeting criteria is (partially) based on either declared or inferred gender",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "user_characteristic_age"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "user_characteristic_age_group": {
                                    "description": "The advert targeting criteria is (partially) based on either declared or inferred age group",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "user_characteristic_follower"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "user_characteristic_follower": {
                                    "description": "The user is following specific account. For example, this could look like 'You are similar to the followers of UNESCO'",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "user_characteristic_country"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "user_characteristic_country": {
                                    "description": "User country",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "user_characteristic_language"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "user_characteristic_language": {
                                    "description": "The advert targeting criteria is (partially) based on either declared or inferred user language(s)",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "user_characteristic_exclusion"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "user_characteristic_exclusion": {
                                    "description": "Any exclusions based on user characteristics",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "user_characteristic_unknown_type"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "user_characteristic_unknown_type": {
                                    "description": "Other user characteristics not listed",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "user_interest"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "user_interest_excluded": {
                                    "description": "User interests that were excluded from targeting",
                                    "type": "string"
                                },
                                "user_interest_used": {
                                    "description": "The advert targeting criteria is (partially) based on either declared or inferred user interests",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "hashed_list"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "value": {
                                    "description": "Advertiser used a hashed list to target specific users. For example, this could look like 'Advertiser has uploaded a hashed list with your information'",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "user_interaction"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "value": {
                                    "description": "User has interacted with specific accounts or topics. For example, this could look like 'You have interacted with business and education topics'",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "user_activity"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "value": {
                                    "description": "User has specific activities. For example, this could look like 'Activity on Facebook such as using Facebook check-in'",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "user_connection"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "value": {
                                    "description": "User is targeted through connections. For example, this could look like 'Connection information, such as the IP address of your device'",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "user_website_visit"
                                }
                            }
                        },
                        "then": {
                            "properties": {
                                "value": {
                                    "description": "User has visited certain websites. For example, when user clicks on a post and gets redirected to a website that is about higher education or fitness",
                                    "type": "string"
                                }
                            }
                        }
                    },
                    {
                        "if": {
                            "properties": {
                                "type": {
                                    "const": "other"
                                }
                            }
                        },
                        "then": {
                            "properties": {}
                        }
                    }
                ]
            }
        },
        "spending": {
            "type": "object",
            "properties": {
                "spending_not_disclosed": {
                    "description": "Default value",
                    "type": "boolean",
                    "default": true
                },
                "spending_total": {
                    "description": "The exact amount spent on the advert",
                    "type": "number"
                },
                "spending_budget": {
                    "description": "The total budget for the ad at time of creation",
                    "type": "number"
                },
                "spending_lower_bound": {
                    "description": "The lower bound of spending on the ad (e.g. $500)",
                    "type": "number"
                },
                "spending_upper_bound": {
                    "description": "The higher bound of spending on the ad (e.g. $600)",
                    "type": "number"
                }
            }
        },
        "delivery": {
            "type": "object",
            "properties": {
                "delivery_not_disclosed": {
                    "description": "Default value",
                    "type": "boolean",
                    "default": true
                },
                "delivery_optimization": {
                    "description": "The delivery optimization method selected by the advertiser",
                    "type": "string"
                }
            }
        },
        "reach": {
            "type": "object",
            "properties": {
                "impressions": {
                    "type": "object",
                    "properties": {
                        "impressions_not_disclosed": {
                            "description": "Default value",
                            "type": "boolean",
                            "default": true
                        },
                        "impressions_paid_lower_bound": {
                            "description": "Lower bound of the number of paid advert impressions delivered",
                            "type": "number"
                        },
                        "impressions_paid_upper_bound": {
                            "description": "Upper bound of the number of paid advert impressions delivered",
                            "type": "number"
                        },
                        "impressions_organic_lower_bound": {
                            "description": "Lower bound of the number of non-paid (e.g. via shares) advert impressions delivered",
                            "type": "number"
                        },
                        "impressions_organic_upper_bound": {
                            "description": "Upper bound of the number of non-paid (e.g. via shares) advert impressions delivered",
                            "type": "number"
                        }
                    }
                },
                "unique_users": {
                    "type": "object",
                    "properties": {
                        "unique_users_not_disclosed": {
                            "description": "Default value",
                            "type": "boolean",
                            "default": true
                        },
                        "unique_users_lower_bound": {
                            "description": "Lower bound of the number of unique users who saw > 1 impression of the advert",
                            "type": "number"
                        },
                        "unique_users_upper_bound": {
                            "description": "Upper bound of the number of unique users who saw > 1 impression of the advert",
                            "type": "number"
                        }
                    }
                },
                "engagement": {
                    "type": "object",
                    "properties": {
                        "engagement_not_disclosed": {
                            "description": "Default value",
                            "type": "boolean",
                            "default": true
                        },
                        "engagement_clicks": {
                            "description": "The number of clicks on the advert",
                            "type": "number"
                        },
                        "engagement_social": {
                            "description": "The social engagement with the advert, presented as an array (likes/shares/comments if these features are available)",
                            "type": "object"
                        }
                    },
                    "allOf": [
                        {
                            "if": {
                                "properties": {
                                    "advertising_platform": {
                                        "oneOf": [
                                            {
                                                "properties": {
                                                    "platform_name": {
                                                        "const": "Facebook"
                                                    }
                                                },
                                                "required": [
                                                    "platform_name"
                                                ]
                                            }
                                        ]
                                    }
                                }
                            },
                            "then": {
                                "properties": {
                                    "engagement_social": {
                                        "type": "object",
                                        "properties": {
                                            "likes": {
                                                "type": "number"
                                            },
                                            "shares": {
                                                "type": "number"
                                            },
                                            "comments": {
                                                "type": "number"
                                            },
                                            "love": {
                                                "type": "number"
                                            },
                                            "haha": {
                                                "type": "number"
                                            },
                                            "wow": {
                                                "type": "number"
                                            },
                                            "care": {
                                                "type": "number"
                                            },
                                            "angry": {
                                                "type": "number"
                                            }
                                        },
                                        "additionalProperties": true
                                    }
                                }
                            }
                        },
                        {
                            "if": {
                                "properties": {
                                    "advertising_platform": {
                                        "oneOf": [
                                            {
                                                "properties": {
                                                    "platform_name": {
                                                        "const": "Twitter"
                                                    }
                                                },
                                                "required": [
                                                    "platform_name"
                                                ]
                                            }
                                        ]
                                    }
                                }
                            },
                            "then": {
                                "properties": {
                                    "engagement_social": {
                                        "type": "object",
                                        "properties": {
                                            "replies": {
                                                "type": "number"
                                            },
                                            "retweets": {
                                                "type": "number"
                                            },
                                            "likes": {
                                                "type": "number"
                                            },
                                            "quote_retweets": {
                                                "type": "number"
                                            },
                                            "bookmarks": {
                                                "type": "number"
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        {
                            "if": {
                                "properties": {
                                    "advertising_platform": {
                                        "oneOf": [
                                            {
                                                "properties": {
                                                    "platform_name": {
                                                        "const": "Instagram"
                                                    }
                                                },
                                                "required": [
                                                    "platform_name"
                                                ]
                                            }
                                        ]
                                    }
                                }
                            },
                            "then": {
                                "properties": {
                                    "engagement_social": {
                                        "type": "object",
                                        "properties": {
                                            "comments": {
                                                "type": "number"
                                            },
                                            "likes": {
                                                "type": "number"
                                            },
                                            "views": {
                                                "type": "number"
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        {
                            "if": {
                                "properties": {
                                    "advertising_platform": {
                                        "oneOf": [
                                            {
                                                "properties": {
                                                    "platform_name": {
                                                        "const": "Youtube"
                                                    }
                                                },
                                                "required": [
                                                    "platform_name"
                                                ]
                                            }
                                        ]
                                    }
                                }
                            },
                            "then": {
                                "properties": {
                                    "engagement_social": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    ]
                },
                "demographics": {
                    "type": "object",
                    "properties": {
                        "demographics_not_disclosed": {
                            "description": "Default value",
                            "type": "boolean",
                            "default": true
                        },
                        "demographics_gender": {
                            "description": "The reach of the advert, broken down by gender",
                            "type": "string"
                        },
                        "demographics_age": {
                            "description": "The reach of the advert, broken down by age ranges (25-34, 35-44 etc)",
                            "type": "string"
                        },
                        "demographics_location": {
                            "description": "The reach of the advert, broken down by country and geographical area",
                            "type": "string"
                        }
                    }
                }
            }
        },
        "moderation": {
            "type": "object",
            "properties": {
                "moderation_not_disclosed": {
                    "description": "Default value",
                    "type": "boolean",
                    "default": true
                },
                "moderation_review_type": {
                    "description": "Automated, manual or none. Refers to the highest level of moderation an advert received (e.g. if an automated system referred it for manual review, the value is \"manual\"). Presented as an array: Datestamp of moderation => Moderation type",
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "datestamp": {
                                "type": "string",
                                "format": "date-time"
                            },
                            "type": {
                                "type": "string"
                            }
                        }
                    }
                },
                "moderation_3rd_party_fact_check": {
                    "description": "Presented as an array: Datestamp of check => Link to information about check",
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "datestamp": {
                                "type": "string",
                                "format": "date-time"
                            },
                            "link": {
                                "type": "string",
                                "format": "uri"
                            }
                        }
                    }
                },
                "moderation_rule_applied": {
                    "description": "Approved ads = NULL, otherwise link to or description of specific ruile that led to the advert not being approved",
                    "type": "string"
                }
            }
        },
        "provider_data": {
            "type": "object",
            "description": "This property should hold any other data that are not platform-specific but are still necessary to make sense of the data described above. This is an extensible property."
        }
    },
    "required": [
        "advertiser",
        "advertisement",
        "advertising_platform",
        "targeting_categories",
        "spending",
        "delivery",
        "reach",
        "moderation",
        "provider_data"
    ]
}